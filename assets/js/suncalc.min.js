!function(){"use strict";function n(n){return n.valueOf()/z-.5+H}function t(n){return new Date((n+.5-H)*z)}function r(t){return n(t)-I}function e(n,t){return P(w(n)*p(S)-D(t)*w(S),p(n))}function u(n,t){return E(w(t)*p(S)+p(t)*w(S)*w(n))}function i(n,t,r){return P(w(n),p(n)*w(t)-D(r)*p(t))}function a(n,t,r){return E(w(t)*w(r)+p(t)*p(r)*p(n))}function o(n,t){return y*(280.16+360.9856235*n)-t}function c(n){return y*(357.5291+.98560028*n)}function d(n){return y*(1.9148*w(n)+.02*w(2*n)+3e-4*w(3*n))}function f(n,t){var r=102.9372*y;return n+t+r+m}function s(n){var t=c(n),r=d(t),i=f(t,r);return{dec:u(i,0),ra:e(i,0)}}function l(n,t){return Math.round(n-C-t/(2*m))}function h(n,t,r){return C+(n+t)/(2*m)+r}function v(n,t,r){return I+n+.0053*w(t)-.0069*w(2*r)}function g(n,t,r){return k((w(n)-w(t)*w(r))/(p(t)*p(r)))}function M(n){var t=y*(218.316+13.176396*n),r=y*(134.963+13.064993*n),i=y*(93.272+13.22935*n),a=t+6.289*y*w(r),o=5.128*y*w(i),c=385001-20905*p(r);return{ra:e(a,o),dec:u(a,o),dist:c}}var m=Math.PI,w=Math.sin,p=Math.cos,D=Math.tan,E=Math.asin,P=Math.atan2,k=Math.acos,y=m/180,z=864e5,H=2440588,I=2451545,S=23.4397*y,T={};T.getPosition=function(n,t,e){var u=y*-e,c=y*t,d=r(n),f=s(d),l=o(d,u)-f.ra;return{azimuth:i(l,c,f.dec),altitude:a(l,c,f.dec)}};var x=[[-.83,"sunrise","sunset"],[-.3,"sunriseEnd","sunsetStart"],[-6,"dawn","dusk"],[-12,"nauticalDawn","nauticalDusk"],[-18,"nightEnd","night"],[6,"goldenHourEnd","goldenHour"]];T.addTime=function(n,t,r){x.push([n,t,r])};var C=9e-4;T.getTimes=function(n,e,i){function a(n){var t=g(n,D,S),r=h(t,p,P);return v(r,z,I)}var o,s,M,m,w,p=y*-i,D=y*e,E=r(n),P=l(E,p),k=h(0,p,P),z=c(k),H=d(z),I=f(z,H),S=u(I,0),T=v(k,z,I),C={solarNoon:t(T),nadir:t(T-.5)};for(o=0,s=x.length;s>o;o+=1)M=x[o],m=a(M[0]*y),w=T-(m-T),C[M[1]]=t(w),C[M[2]]=t(m);return C},T.getMoonPosition=function(n,t,e){var u=y*-e,c=y*t,d=r(n),f=M(d),s=o(d,u)-f.ra,l=a(s,c,f.dec);return l+=.017*y/D(l+10.26*y/(l+5.1*y)),{azimuth:i(s,c,f.dec),altitude:l,distance:f.dist}},T.getMoonIllumination=function(n){var t=r(n),e=s(t),u=M(t),i=149598e3,a=k(w(e.dec)*w(u.dec)+p(e.dec)*p(u.dec)*p(e.ra-u.ra)),o=P(i*w(a),u.dist-i*p(a));return{fraction:(1+p(o))/2,angle:P(p(e.dec)*w(e.ra-u.ra),w(e.dec)*p(u.dec)-p(e.dec)*w(u.dec)*p(e.ra-u.ra))}},"function"==typeof define&&define.amd?define(T):"undefined"!=typeof module?module.exports=T:window.SunCalc=T}();