var about=$(".about span"),output=$("#howlong"),sun=$(".sun-selector"),cloudparts=$(".opencloud.cloud, .opencloud.cloud::after, .opencloud.cloud::before");$(function(){$(".cloudlayer .cloud").addClass("animate-cloudToLeft"),sun.click(geolocate),$("a.info-open").click(function(){$(".pane").addClass("full")}),$("a.info-close").click(function(){$(".pane").removeClass("full")})});var geolocate=function(){about.animate({opacity:"0"},400),$("body").css("cursor","wait"),navigator.geolocation?navigator.geolocation.getCurrentPosition(sunsetCalc):alert("Sorry! Geolocation is not supported by your browser. We will be adding zip code functionality soon.")},sunsetCalc=function(e){$("body").css("cursor","auto"),$("#sunner").animate({opacity:1}),output.hide();var o=e.coords.latitude,t=e.coords.longitude,n=new Date,s=SunCalc.getTimes(new Date,o,t),a=new Date,u=new Date;a.setDate(n.getDate()+1),u.setDate(n.getDate()-1);var i=SunCalc.getTimes(a,o,t),r=SunCalc.getTimes(u,o,t),d=n.getHours(),l=null,c={};0==d?(c.isDay=!1,l=i.dawn-n,barGraph(s.dusk-i.dawn,n-s.dusk,!1)):n>s.dawn&&n<s.dusk?(c.isDay=!0,l=s.dusk-n,barGraph(s.dusk-s.dawn,n-s.dawn,!0)):n>s.dusk&&n>s.dawn?(c.isDay=!1,l=i.dawn-n,console.log("tomorrow dawn "+i.dawn),console.log("now dusk "+s.dusk),console.log("now "+n),barGraph(i.dawn-s.dusk,n-s.dusk,!1)):s.dawn>n&&(c.isDay=!1,l=s.dawn-n,barGraph(s.dawn-r.dusk,n-r.dusk,!1));var m=function(e){c.inseconds=Math.floor(e/1e3),c.numminutes=Math.floor(c.inseconds%3600/60),c.numhours=Math.floor(c.inseconds/3600),c.numseconds=Math.floor(c.inseconds%3600%60)};switch(m(l),c.isDay){case!0:c.numhours>0?($("#hours").text(c.numhours),$("#minutes").text(c.numminutes),$("#seconds").text(c.numseconds)):($("#hours").text(c.numhours),$("#minutes").text(c.numminutes),$("#seconds").text(c.numseconds)),$(".svg-container").addClass("day"),$("body").addClass("day");break;case!1:c.numhours>0?($("#hours").text(c.numhours),$("#minutes").text(c.numminutes),$("#seconds").text(c.numseconds)):($("#hours").text(c.numhours),$("#minutes").text(c.numminutes),$("#seconds").text(c.numseconds)),$(".svg-container").addClass("moon"),$("html").addClass("moon")}$(".time").css("display","inline-block"),$(".bottom-words").remove(),$(".about").empty(),$(".output").animate({opacity:"1"},400)},barGraph=function(e,o){function t(e){var o=["","one","two","three","four","five","six","seven","eight","nine"],t=["","","twenty","thirty","forty","fifty","sixty","seventy","eighty","ninety"],n=["ten","eleven","twelve","thirteen","fourteen","fifteen","sixteen","seventeen","eighteen","nineteen"],s=e.toString().split("");for(i=0;i<s.length;i++)s[i]=+s[i];if(2===s.length)if(s[0]>=2)if(0!=s[1])var a=t[s[0]].toString()+"-"+o[s[1]].toString();else var a=t[s[0]].toString();else var a=n[s[1]].toString();else if(1===s.length)var a=o[s[0]].toString();return a}console.log("whole passed: "+e),console.log("elapsed passed: "+o);{var n=Math.floor(100*(o/e));100-Math.floor(100*(o/e))}$(".bar-words").text(t(n)+" percent of the way to dusk"),$("#sunmarker").css("left",n+"%"),$(".bar").animate({opacity:"1"},2e3)};