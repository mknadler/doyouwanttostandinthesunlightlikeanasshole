$(function(){var t=$(".about span"),o=$("#howlong"),e=$(".sun-selector"),n=($(".opencloud.cloud, .opencloud.cloud::after, .opencloud.cloud::before"),function(){a.beforeGeo(),s.exists()?u(s.localPosition):s.geolocate()}),a=function(){function e(){t.animate({opacity:"0"},400),$("body").css("cursor","wait")}function n(){$("body").css("cursor","auto"),$("#sunner").animate({opacity:1}),o.hide()}return{beforeGeo:e,afterGeo:n}}(),s=function(){function t(){return void 0!==this.localPosition?!0:!1}function o(){navigator.geolocation?navigator.geolocation.getCurrentPosition(function(t){s.localPosition=t,u(t)}):alert("Sorry! Geolocation is not supported by your browser. We will be adding zip code functionality soon.")}var e;return{exists:t,geolocate:o,localPosition:e}}(),r=function(){function t(t){for(var o=0,e=s.length;e>o;o++)s[o].at=SunCalc.getTimes(s[o],t.coords.latitude,t.coords.longitude)}function o(){r.today=new Date,r.tomorrow=new Date,r.yesterday=new Date,r.yesterday.setDate(a.getDate()-1),r.tomorrow.setDate(n.getDate()+1)}var e=new Date,n=new Date,a=new Date,s=[e,n,a];return a.setDate(a.getDate()-1),n.setDate(n.getDate()+1),{now:e,today:e,tomorrow:n,yesterday:a,assign:t,refresh:o}}(),u=function(t){a.afterGeo(),r.assign(t);var o=null,e={},n=r.now;0===r.now.getHours()?(e.isDay=!1,o=r.tomorrow.at.dawn-n,d(r.tomorrow.at.dawn-r.today.at.dusk,n-r.today.at.dusk,!1)):n>r.today.at.dawn&&n<r.today.at.dusk?(e.isDay=!0,o=r.today.at.dusk-n,d(r.today.at.dusk-r.today.at.dawn,n-r.today.at.dawn,!0)):n>r.today.at.dusk&&n>r.today.at.dawn?(e.isDay=!1,o=r.tomorrow.at.dawn-n,d(r.tomorrow.at.dawn-r.today.at.dusk,n-r.today.at.dusk,!1)):r.today.at.dawn>n&&(e.isDay=!1,o=r.today.at.dawn-n,d(r.today.at.dawn-r.yesterday.at.dusk,n-r.yesterday.at.dusk,!1));var s=function(t){e.inseconds=Math.floor(t/1e3),e.numminutes=Math.floor(e.inseconds%3600/60),e.numhours=Math.floor(e.inseconds/3600),e.numseconds=Math.floor(e.inseconds%3600%60)};switch(s(o),e.isDay){case!0:e.numhours>0?($("#hours").text(e.numhours),$("#minutes").text(e.numminutes),$("#seconds").text(e.numseconds)):($("#hours").text(e.numhours),$("#minutes").text(e.numminutes),$("#seconds").text(e.numseconds)),$(".svg-container").addClass("day"),$("body").addClass("day");break;case!1:e.numhours>0?($("#hours").text(e.numhours),$("#minutes").text(e.numminutes),$("#seconds").text(e.numseconds)):($("#hours").text(e.numhours),$("#minutes").text(e.numminutes),$("#seconds").text(e.numseconds)),$(".svg-container").addClass("moon"),$("html").addClass("moon"),$("#output-type").text(" until dawn.")}$(".time").css("display","inline-block"),$(".bottom-words").remove(),$(".about").remove(),$(".output").animate({opacity:"1"},400)},d=function(t,o,e){function n(t){var o=["","one","two","three","four","five","six","seven","eight","nine"],e=["","","twenty","thirty","forty","fifty","sixty","seventy","eighty","ninety"],n=["ten","eleven","twelve","thirteen","fourteen","fifteen","sixteen","seventeen","eighteen","nineteen"],a=t.toString().split("");for(i=0;i<a.length;i++)a[i]=+a[i];if(2===a.length)if(a[0]>=2)if(0!=a[1])var s=e[a[0]].toString()+"-"+o[a[1]].toString();else var s=e[a[0]].toString();else var s=n[a[1]].toString();else if(1===a.length)var s=o[a[0]].toString();return s}{var a=Math.floor(100*(o/t));100-Math.floor(100*(o/t))}e?$(".bar-words").text(n(a)+" percent of the way to dusk"):($(".bar-words").text(n(a)+" percent of the way to dawn"),$("#left-bar").text("dusk"),$("#right-bar").text("dawn")),$("#sunmarker").css("left",a+"%"),$(".bar").animate({opacity:"1"},2e3)};$(".cloudlayer .cloud").addClass("animate-cloudToLeft"),e.click(n),$("a.info-open").click(function(){$(".pane").addClass("full")}),$("a.info-close").click(function(){$(".pane").removeClass("full")})});