var about=$(".about span"),output=$("#howlong"),sun=$(".sun-selector"),cloudparts=$(".opencloud.cloud, .opencloud.cloud::after, .opencloud.cloud::before");$(function(){$(".cloudlayer .cloud").addClass("animate-cloudToLeft"),sun.click(geolocate),$(".opencloud.cloud").click(function(){$(".pane").addClass("full")}),$(".closecloud.cloud").click(function(){$(".pane").removeClass("full")})});var geolocate=function(){about.animate({color:"#ffffcc",opacity:"0"},400),$("body").css("cursor","wait"),navigator.geolocation?navigator.geolocation.getCurrentPosition(sunsetCalc):alert("Sorry! Geolocation is not supported by your browser. We will be adding zip code functionality soon.")},sunsetCalc=function(o){$("body").css("cursor","auto"),$("#sunner").animate({opacity:1}),output.hide();var n=o.coords.latitude,e=o.coords.longitude,t=new Date,a=SunCalc.getTimes(new Date,n,e),t=(a.dusk,a.dawn,new Date),s=SunCalc.getTimes(new Date,n,e),d=new Date;d.setDate(t.getDate()+1);var u=SunCalc.getTimes(d,n,e);console.log("Now "+t),console.log("Now dawn "+s.dawn),console.log("Now dusk "+s.dusk),console.log("Tomorrow "+d),console.log("Tomorrow dawn "+u.dawn),console.log("Tomorrow dusk "+u.dusk);var l=t.getHours();console.log(l),console.log(typeof l);var c=!0,r=null,i={};0==l?(console.log("midnight to 1am"),c=!1,r=u.dawn-t,console.log(r)):t>s.dawn&&t<s.dusk?(console.log("after dawn, before dusk"),c=!0,r=s.dusk-t,console.log(typeof r)):t>s.dusk&&t>s.dawn?(console.log("between dusk and midnight/1am"),c=!1,r=u.dawn-t,console.log(r)):s.dawn>t&&(console.log("between midnight and dawn"),c=!1,r=s.dawn-t,console.log(r));var w=function(o){i.seconds=Math.floor(o/1e3),i.numminutes=Math.floor(i.seconds%3600/60),i.numhours=Math.floor(i.seconds/3600),i.numseconds=Math.floor(i.seconds%3600%60),i.isDay=(c=!0)?!0:!1};w(r),console.log(i),/*
	var difference = sunset_time - now;
    var seconds = Math.floor(difference / 1000);
    var numhours = Math.floor(seconds / 3600);
    var numminutes = Math.floor((seconds % 3600) / 60);
    var numseconds = Math.floor((seconds % 3600) % 60);

    if (sunrise_time > now) {
        var difference = sunrise_time - now;
        seconds = Math.floor(difference / 1000);
        numhours = Math.floor(seconds / 3600);
        numminutes = Math.floor((seconds % 3600) / 60);
        numseconds = Math.floor((seconds % 3600) % 60);
    	output.text("Dawn is coming in " + numhours + " hours & " + numminutes + " minutes.");
        $(".svg-container").addClass("moon");
        $("html").addClass("moon");
        $(".about span, #howlong").css("color", "#DDD");
    } else if (difference < 0) {
        //console.log("diff < 0");
        difference = difference * -1;
        seconds = Math.floor(difference / 1000);
        numhours = Math.floor(seconds / 3600);
        numminutes = Math.floor((seconds % 3600) / 60);
        numseconds = Math.floor((seconds % 3600) % 60);
        if (numhours >= 1) {
            output.text("Oh no! Dusk began " + numhours + " hours, " + numminutes + " minutes, and " + numseconds + " seconds ago!");	
    	} else {
            output.text("Oh no! Dusk began " + numminutes + " minutes and " + numseconds + " seconds ago!");  
        }
        $(".svg-container").addClass("moon");
    	$("html").addClass("moon");
    	$(".about span, #howlong").css("color", "#DDD");
    }
    else if (numhours <=2 && numhours >= 1) {
    	output.text("Better hurry! You have " + numhours + " hours, " + numminutes + " minutes, & " + numseconds + " seconds until dusk!");
    	$(".svg-container").addClass("day");
        barGraph(all_times, numhours, numminutes);
    } else if (numhours < 1) {
    	output.text("Better hurry! You have " + numminutes + " minutes, & " + numseconds + " seconds until dusk!");	
    	$(".svg-container").addClass("day");
        barGraph(all_times, numhours, numminutes);
    } else if (numhours >= 2) {
    	output.text("You have " + numhours + " hours, " + numminutes + " minutes, & " + numseconds + " seconds until dusk!");
    	$(".svg-container").addClass("day");
        barGraph(all_times, numhours, numminutes);
    }
    */
$(".time").css("display","inline-block"),output.fadeIn(1200),about.empty()},barGraph=function(o){for(var n=new Function("hours","minutes","return hours*60 + minutes"),e=[o.dawn,o.dusk,o.night,o.nightEnd,o.solarNoon],t=0;4>=t;t++)e[t]=n(e[t].getHours(),e[t].getMinutes());var a=e[0],s=e[1],d=e[2],u=e[3],l=e[4],c=new Date,r=60*c.getHours()+c.getMinutes(),i=d-u,w=(a-u)/i,g=(s-u)/i,f=(l-u)/i,k=(r-a)/i;before_dawn=100*w,dawn_to_noon=100*(f-w),noon_to_dusk=100*(g-f),at_dusk=Math.round(1-(before_dawn+dawn_to_noon+noon_to_dusk)),console.log(at_dusk),duskbar=100- -1*at_dusk,adjusted_dusk=100-(before_dawn+dawn_to_noon+noon_to_dusk),$(".bargraph").fadeIn(),$("#before-dawn").width(before_dawn+"%"),$("#dawn-to-noon").width(dawn_to_noon+"%"),$("#noon-to-dusk").width(noon_to_dusk+"%"),$("#dusk").width(adjusted_dusk+"%"),$("#elapsed").width(100*k+"%")};